
(function(){$.strToObj=function(c){var b={},a=c.replace(/[\{\}]/g,"").split(",");$.each(a,function(){var d=this.split(":");b[d[0].replace(/[\"\']/g,"").trim()]=d[1].replace(/[\"\']/g,"").trim()});return b};$.checkAutocompleteData=function(b,c){var a=false;$.each(c,function(){if(this.toLowerCase().indexOf($(b).val().toLowerCase())!==-1){a=true;return false}});return a};$.loadAutocompleteData=function(b,d,c,g){var f=$(b).data("beforeListing")?window[$(b).data("beforeListing")]:c.beforeListing,e=$(b).data("list")?window[$(b).data("list")]:c.list,h=$(b).data("afterListing")?window[$(b).data("afterListing")]:c.afterListing;if(typeof f==="function"){f.call($(b),$(d),g)}var a=$(b).data("siftData")||c.sift_data||false;if(!g){g=c.data;a=true}$.each(g,function(){if(a&&!$.checkAutocompleteData(b,this)){return}if(typeof e==="function"){e.call($(b),$(d).append("<li />").children().last(),this)}});if(typeof h==="function"){h.call($(b),$(d),g)}};$.fn.autocomplete=function(b){var a={url:"",ul_class:"",data:[],min_chars:3,delay:300,method:"get",data_key:"",sift_data:false,beforeListing:function(d,e){$(d).html("")},list:function(d,e){$.each(e,function(){$(d).append("<p>"+this+"</p>")})},afterListing:function(d,e){}};$.extend(a,b);var c=[];this.each(function(d){var f={};$.extend(f,a);if($(this).data("jqAutocomplete")){var e=$(this).data("jqAutocomplete");$.extend(f,typeof e==="object"?e:$.strToObj($(this).data("jqAutocomplete")))}c.push(undefined);$(this).data("aci",d).on("keyup",function(){clearTimeout(c[$(this).data("aci")]);c[$(this).data("aci")]=setTimeout(function(){var h=$(this).data("minChars")||f.min_chars||3;var i=$(this),g=i.closest(".auto-completing").find("ul.completing-list");if(!i.val()||i.val().length<h){g.html("");return}if(f.data.length){$.loadAutocompleteData(i,g,f)}else{if(f.url.length||i.data("url")){$[i.data("method")||f.method](i.data("url")||f.url,{query:$(this).val().trim()},function(k){var j=i.data("dataKey")||f.data_key;$.loadAutocompleteData(i,g,f,j?k[j]:k)},"json")}}}.bind(this),f.delay)}).wrap("<div/>").parent().addClass("auto-completing").append('<ul class="completing-list '+($(this).data("ulClass")||f.ul_class)+'"/>')});return this};$(function(){$("[data-jq-autocomplete]").autocomplete()})})(jQuery);